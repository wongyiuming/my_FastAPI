<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>åŒ¿åå³ç„šå¢™</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-slate-200 p-4">
    <div class="max-w-xl mx-auto">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-2xl font-bold text-orange-500">ğŸ”¥ é˜…åå³ç„šå¢™</h1>
            <span class="text-xs bg-slate-800 p-2 rounded">TTL: 240s</span>
        </div>

        <div class="mb-8 border-b border-slate-700 pb-6">
            <textarea id="ipt" class="w-full bg-slate-800 border-none rounded-lg p-3 focus:ring-2 focus:ring-orange-500 mb-2" placeholder="å†™ç‚¹ä»€ä¹ˆ..."></textarea>
            <button onclick="send()" class="w-full bg-orange-600 hover:bg-orange-500 text-white font-bold py-2 rounded-lg transition">å‘å°„</button>
        </div>

        <div id="list" class="space-y-4"></div>
    </div>

    <script>
        async function refresh() {
            const res = await fetch('/api/v1/wall/list');
            const data = await res.json();
            document.getElementById('list').innerHTML = data.map(i => `
                <div class="bg-slate-800 p-4 rounded-lg border-l-4 border-orange-500 animate-pulse">
                    <p class="text-lg">${i.content}</p>
                    <div class="flex justify-between mt-3 text-[10px] text-slate-500">
                        <span>${new Date(i.created_at).toLocaleString()}</span>
                        <span>å€’è®¡æ—¶: è‡ªåŠ¨é”€æ¯ä¸­</span>
                    </div>
                </div>
            `).join('');
        }

        async function send() {
            const content = document.getElementById('ipt').value;
            if(!content) return;
            const res = await fetch(`/api/v1/wall/publish?content=${encodeURIComponent(content)}`, {method:'POST'});
            if(res.ok) {
                document.getElementById('ipt').value = '';
                refresh();
            } else {
                const err = await res.json();
                alert(err.detail || "æ“ä½œå¤ªå¿«äº†");
            }
        }

        setInterval(refresh, 10000);
        refresh();
    </script>
</body>
</html>